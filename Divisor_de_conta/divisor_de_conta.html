<!DOCTYPE html>
<html>
<head>
    <title>Calculadora de Divisão de Conta</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-5">
        <h1>Calculadora de Divisão de Conta</h1>
        <hr>
        <div class="form-group">
            <label for="inputItem">Item:</label>
            <input type="text" id="inputItem" class="form-control">
        </div>
        <div class="form-group">
            <label for="inputPreco">Preço:</label>
            <input type="number" id="inputPreco" class="form-control">
        </div>
        <div class="form-group">
            <label for="inputCliente">Cliente:</label>
            <input type="text" id="inputCliente" class="form-control">
        </div>
        <button type="button" class="btn btn-primary" onclick="adicionarItem()">Adicionar</button>
        <hr>
        <ul id="lista" class="list-group"></ul>
        <div class="mt-3">
            <button type="button" class="btn btn-success" onclick="calcularTotal()">Calcular Total</button>
            <p id="resultado" class="mt-3"></p>
        </div>
    </div>

    <script>
        let contador = 0;
        let itensPorCliente = {};

        function adicionarItem() {
            let item = document.getElementById("inputItem").value;
            let preco = parseFloat(document.getElementById("inputPreco").value);
            let cliente = document.getElementById("inputCliente").value;

            if (item.trim() === "" || preco <= 0 || cliente.trim() === "") {
                alert("Por favor, preencha corretamente o item, o preço e o cliente.");
                return;
            }

            if (!itensPorCliente.hasOwnProperty(cliente)) {
                itensPorCliente[cliente] = [];
            }

            itensPorCliente[cliente].push(preco);

            let novoItem = document.createElement("li");
            contador++;
            novoItem.classList.add("list-group-item");
            novoItem.innerHTML = "Pedido " + contador + ": " + item + " (Preço: R$" + preco.toFixed(2) + ", Cliente: " + cliente + ")";
            let botaoRemover = document.createElement("button");
            botaoRemover.innerText = "Remover";
            botaoRemover.classList.add("btn", "btn-danger", "btn-sm", "ml-2");
            botaoRemover.onclick = function() { removerItem(botaoRemover.parentNode, cliente, preco) };
            novoItem.appendChild(botaoRemover);
            document.getElementById("lista").appendChild(novoItem);
            document.getElementById("inputItem").value = "";
            document.getElementById("inputPreco").value = "";
            document.getElementById("inputCliente").value = "";
        }

        function removerItem(item, cliente, precoItem) {
            item.parentNode.removeChild(item);
            if (itensPorCliente.hasOwnProperty(cliente)) {
                const index = itensPorCliente[cliente].indexOf(precoItem);
                if (index > -1) {
                    itensPorCliente[cliente].splice(index, 1);
                }
            }
        }

        function calcularTotal() {
            let resultado = document.getElementById("resultado");
            resultado.innerHTML = "";

            for (let cliente in itensPorCliente) {
                if (itensPorCliente.hasOwnProperty(cliente)) {
                    let total = itensPorCliente[cliente].reduce((acc, curr) => acc + curr, 0);
                    let totalComTaxa = total * 1.1;
                    resultado.innerHTML += "Cliente " + cliente + ": R$" + total.toFixed(2) + " + 10% = R$" + totalComTaxa.toFixed(2) + "<br>";
                }
            }
        }
    </script>
</body>
</html>
